<div class="app-content content" style="direction: rtl">
  <div class="content-wrapper">
    <div class="searchInput" style="direction: rtl">
      <form
        class="form form-horizontal row-separator"
        [formGroup]="DetailsForm"
      >
        <!-- input text search start ---------------------------------------------------------------------------------------------------------------------->

        <div class="form-body text-right">
          <h4 class="form-section"><i class="la la-eye"></i>חיפוש מגדל:</h4>

          <div class="row">
            <!-- שם מגדל טסט -->
            <div class="col-md-4">
              <div class="form-group row mx-auto">
                <label class="col-md-4 label-control" for="userinput1"
                  >שם מגדל</label
                >
                <div class="col-md-8">
                  <input
                    name="username_test"
                    type="text"
                    id="username-input"
                    class="form-control border-primary textUserInput"
                    placeholder="שם"
                    [(ngModel)]="username_test"
                    [formControl]="usernameControl_test"
                  />
                  <span
                    class="delete-icon"
                    (click)="clearInput('username_test')"
                  >
                    <i class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>

            <!-- סטטוס -->
            <div class="col-md-4">
              <div class="form-group row mx-auto">
                <label class="col-md-4 label-control" for="userinput1"
                  >סטטוס</label
                >
                <div class="col-md-8">
                  <select
                    class="form-control"
                    name="statusSelect"
                    [(ngModel)]="selectedStatus"
                    [formControl]="selectedStatusControl"
                  >
                    <option value="active">פעיל</option>
                    <option value="inactive">לא פעיל</option>
                    <option value="historicallyActive">פעיל היסטורית</option>
                    <option value="all">כולם</option>
                  </select>
                  <span
                    class="delete-icon"
                    (click)="clearInput('selectedStatus')"
                  >
                    <i class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>

            <!-- מס אתר -->
            <div class="col-md-4">
              <div class="form-group row mx-auto">
                <label class="col-md-4 label-control" for="userinput1"
                  >מספר אתר</label
                >
                <div class="col-md-8">
                  <input
                    name="siteNum_test"
                    type="text"
                    id="siteNum-input"
                    class="form-control border-primary textUserInput"
                    placeholder="מס אתר"
                    [(ngModel)]="siteNum_test"
                    [formControl]="siteNumControl_test"
                  />
                  <span
                    class="delete-icon"
                    (click)="clearInput('siteNum_test')"
                  >
                    <i class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>

            <!-- מס ג''ח' -->
            <div class="col-md-4">
              <div class="form-group row mx-auto">
                <label class="col-md-4 label-control" for="userinput1"
                  >מספר גח</label
                >
                <div class="col-md-8">
                  <input
                    name="gidulHotzNum_test"
                    type="text"
                    id="gidulHotzNum-input"
                    class="form-control border-primary textUserInput"
                    placeholder="מס גח"
                    [(ngModel)]="gidulHotzNum_test"
                    [formControl]="gidulHotzNumControl_test"
                  />
                  <span
                    class="delete-icon"
                    (click)="clearInput('gidulHotzNum_test')"
                  >
                    <i class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>

            <!-- מס מגדל -->
            <div class="col-md-4">
              <div class="form-group row mx-auto">
                <label class="col-md-4 label-control" for="userinput1"
                  >מס מגדל</label
                >
                <div class="col-md-8">
                  <input
                    name="growerNum_test"
                    type="text"
                    id="growerNum-input"
                    class="form-control border-primary textUserInput"
                    placeholder="מס מגדל"
                    [(ngModel)]="growerNum_test"
                    [formControl]="growerNumControl_test"
                  />
                  <span
                    class="delete-icon"
                    (click)="clearInput('growerNum_test')"
                  >
                    <i class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>

                        <!-- תז מגדל -->
                        <div class="col-md-4">
                            <div class="form-group row mx-auto">
                              <label class="col-md-4 label-control" for="userinput1"
                                >תז מגדל</label
                              >
                              <div class="col-md-8">
                                <input
                                  name="growerNum_test"
                                  type="text"
                                  id="growerNum-input"
                                  class="form-control border-primary textUserInput"
                                  placeholder="תז מגדל"
                                  [(ngModel)]="grower_zeut_test"
                                  [formControl]="grower_zeut_testControl_test"
                                />
                                <span
                                  class="delete-icon"
                                  (click)="clearInput('growerNum_test')"
                                >
                                  <i class="fa fa-times"></i>
                                </span>
                              </div>
                            </div>
                          </div>



            <!--ישוב-->
            <div class="col-md-4">
              <div class="form-group row mx-auto">
                <label class="col-md-4 label-control" for="userinput1"
                  >ישוב</label
                >
                <div class="col-md-8">
                  <input
                    name="yeshuv_test"
                    type="text"
                    id="yeshuv-input"
                    class="form-control border-primary textUserInput"
                    placeholder="ישוב"
                    [(ngModel)]="yeshuv_test"
                    [formControl]="yeshuvControl_test"
                  />
                  <span class="delete-icon" (click)="clearInput('yeshuv_test')">
                    <i class="fa fa-times"></i>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- input text search end ---------------------------------------------------------------------------------------------------------------------->

        <!-- Color Checkboxes start ---------------------------------------------------------------------------------------------------------------------->
        <div class="checkboxStyle">
          <section class="input-type-options">
            <div class="row" matchHeight="card">
              <div class="col-xl-6 col-lg-12 clean_and_search_btn">
                <div class="">
                  <div class="card-content">
                    <div class="card-body">
                      <div>
                        <div
                          class="d-inline-block custom-control custom-checkbox mr-1"
                          style="padding: unset; margin-bottom: 15px"
                        >
                          <button
                            type="button"
                            class="btn btn-primary cleanBtn"
                            style="margin-left: 15px !important"
                            (click)="cleanInputFild()"
                          >
                            <i class="feather ft-x"></i> נקה
                          </button>

                          <button
                            type="submit"
                            (click)="add_test()"
                            class="btn btn-primary"
                          >
                            <i class="la la-check"></i> חפש
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>
        <!--end Color Checkboxes  ---------------------------------------------------------------------------------------------------------------------->
      </form>
    </div>

    <!-- table of results  ---------------------------------------------------------------------------------------------------------------------->

    <div class="content-body text-right">
      <div *ngIf="isLoading" class="isLoading"></div>

      <div *ngIf="!isLoading">
        <section id="base-style text-right">
          <div class="row">
            <div class="col-12" *blockUI="'baseStyle'; message: 'Loading'">
              <m-card
                [options]="options"
                (reloadFunction)="reloadBaseStyle($event)"
              >
                <ng-container mCardHeaderTitle class="searckMegadel">
                  חיפוש מגדל
                </ng-container>
                <ng-container mCardBody>
                  <div class="importBth">
                    <div class="justify-content">
                      <img
                        class="logoIngStyle"
                        src="assets/images/logo/excel.png"
                        alt="Image"
                        (click)="getExcelData()"
                      />
                    </div>
                  </div>
                  <div
                    class="card-dashboard text-right"
                    *ngIf="isLoading_search_megadel"
                    class="loader"
                  ></div>
                  <div
                    class="card-dashboard text-right"
                    *ngIf="!isLoading_search_megadel"
                  >
                    <div *ngIf="isLoading_FarmDetails" class="loader"></div>
                    <div
                      *ngIf="!isLoading_FarmDetails"
                      class="table table-striped table-bordered base-style"
                    >
                      <ngx-datatable
                        class="bootstrap ps"
                        [limit]="20"
                        [rows]="the_new_det"
                        [columnMode]="'force'"
                        [headerHeight]="50"
                        [footerHeight]="50"
                        [rowHeight]="50"
                        fxFlex="auto"
                        [perfectScrollbar]="config"
                      >
                        <!-- מס אתר -->
                        <ngx-datatable-column
                          title="This is a tooltip"
                          name="מספר אתר"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            title="This is a tooltip"
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <ng-container
                              title="This is a tooltip"
                              *ngIf="
                                row.farm_status_id === 1;
                                else closedTemplate
                              "
                            >
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                >
                                  <div *ngIf="allInactive">
                                    <p style="">{{ row.farms }}</p>
                                  </div>
                                  <div *ngIf="!allInactive">
                                    <p style="">
                                      {{ row.farms }}
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </ng-container>
                            <ng-template #closedTemplate>
                              <div
                                [class]="'text-right'"
                                title="This is a tooltip"
                              >
                                <a
                                  title="This is a tooltip"
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                >
                                  <div
                                    *ngIf="allInactive"
                                    title="This is a tooltip"
                                  >
                                    <p style="" title="This is a tooltip">
                                      {{ row.farms }}
                                    </p>
                                  </div>
                                  <div
                                    *ngIf="!allInactive"
                                    title="This is a tooltip"
                                  >
                                    <p style="" title="This is a tooltip">
                                      {{ row.farms }}
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </ng-template>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- מס מגדל -->
                        <ngx-datatable-column
                          name="מספר מגדל"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                              >
                                {{ row.yz_yzrn }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- שם מגדל -->
                        <ngx-datatable-column
                          name="שם יצרן"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                                >{{ row.yz_shem }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- מכסה -->
                        <ngx-datatable-column
                          name="מיכסה"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                              >
                                {{ row.micsa | numberFormat }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- ג''ח' -->
                        <ngx-datatable-column
                          name="ג''ח"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                              >
                                {{ row.pa_Counter }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- ישוב -->
                        <ngx-datatable-column
                          name="ישוב"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                                >{{ row.shem_yeshuv }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- שם פרטי -->
                        <ngx-datatable-column
                          name="שם פרטי"
                          [flexGrow]="1"
                          [minWidth]="30"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                              >
                                {{ row.yz_first_name }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- שם משפחה -->
                        <ngx-datatable-column
                          name="שם משפחה"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                              >
                                {{ row.yz_last_name }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- תז -->
                        <ngx-datatable-column
                          name="ת.ז"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <div [class]="'text-right'">
                              <a
                                [routerLink]="[
                                  '/dashboard/ecommerce',
                                  row.yz_Id
                                ]"
                                >{{ row.yz_zehut }}</a
                              >
                            </div>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- סוג מגדל -->
                        <ngx-datatable-column
                          name="סוג מגדל"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <ng-container *ngIf="row.sug_megadel === 2">
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                  >ראשי</a
                                >
                              </div>
                            </ng-container>
                            <ng-container *ngIf="row.sug_megadel === 1">
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                >
                                  שותף</a
                                >
                              </div>
                            </ng-container>
                            <ng-container *ngIf="row.sug_megadel === 0">
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                  >פרטני</a
                                >
                              </div>
                            </ng-container>
                          </ng-template>
                        </ngx-datatable-column>

                        <!-- סטטוס -->
                        <ngx-datatable-column
                          name="סטטוס"
                          [flexGrow]="1"
                          [minWidth]="90"
                        >
                          <ng-template
                            let-row="row"
                            ngx-datatable-cell-template
                          >
                            <ng-container *ngIf="row.is_real_active === 9">
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                  >לא פעיל</a
                                >
                              </div>
                            </ng-container>

                            <ng-container *ngIf="row.is_real_active === 1">
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                  >פעיל</a
                                >
                              </div>
                            </ng-container>

                            <ng-container *ngIf="row.is_real_active === 2">
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                  >פעיל היסטורית</a
                                >
                              </div>
                            </ng-container>

                            <!-- <ng-container
                              *ngIf="row.
                              is_real_active === 9; else closedTemplate"
                            >
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                >
                                  לא פעיל</a
                                >
                              </div>
                            </ng-container> -->
                            <!-- <ng-template #closedTemplate>
                              <div [class]="'text-right'">
                                <a
                                  [routerLink]="[
                                    '/dashboard/ecommerce',
                                    row.yz_Id
                                  ]"
                                >
                                  פעיל</a
                                >
                              </div>
                            </ng-template> -->
                          </ng-template>
                        </ngx-datatable-column>
                      </ngx-datatable>
                    </div>
                  </div>
                </ng-container>
              </m-card>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
