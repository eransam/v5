<div class="cool-table-container">
  <table class="cool-table main_table" dir="rtl" border="0">
    <thead>
      <tr style="display: flex; justify-content: space-between; padding: 40px">
        <th style="font-weight: bold; text-align: right">
          שיווק ביצי מאכל ממשק {{ this.data[0].farm_code }} -
          {{ this.data[0].farm_name }}
        </th>
      </tr>

      <tr style="display: flex; justify-content: space-between; padding: 40px">
        <th style="font-weight: bold; text-align: right">
          <div class="date-input-container">
            <label for="startDate">מתאריך:</label>
            <input
              type="date"
              id="startDate"
              [(ngModel)]="startDate"
              class="blue-date-input"
            />
          </div>
        </th>

        <th style="font-weight: bold; text-align: right">
          <div class="date-input-container">
            <label for="endDate">עד תאריך:</label>
            <input
              type="date"
              id="endDate"
              [(ngModel)]="endDate"
              class="blue-date-input"
            />
          </div>
        </th>

        <th style="font-weight: bold; text-align: right">
          <label for="statusSelector2">מיון:</label>
          <div class="date-input-container">
            <select
              class="blue-date-input"
              id="statusSelector2"
              [(ngModel)]="splits"
            >
              <option value="ראשי" selected>מגדל ראשי</option>
              <option value="מפוצל">מפוצל</option>
            </select>
          </div>
        </th>

        <th style="font-weight: bold; text-align: right; margin-top: 25px">
          <button (click)="search()" class="search-button">חפש</button>

          <button
            (click)="cleanInputFild()"
            class="search-button"
            style="background-color: rgb(190, 55, 55); margin-right: 10px"
          >
            נקה
          </button>
        </th>
        <th style="font-weight: bold; text-align: right; margin-top: 25px">
          <div class="importBth">
            <div class="justify-content">
              <img
                style="width: 40px"
                class="logoIngStyle"
                src="assets/images/logo/excel.png"
                alt="Image"
                (click)="getExcelData()"
              />
            </div>
          </div>
        </th>
      </tr>
      <tr *ngIf="this.isSplit === 'ראשי'">
        <th style="font-weight: bold; text-align: right; padding: 40px">
          <label for="statusSelector">סטטוס:</label>
          <div
            style="display: flex; width: 25%; flex-direction: row"
            class="date-input-container"
          >
            <select
              class="blue-date-input"
              id="statusSelector"
              (change)="onStatusSelected($event)"
            >
              <option value="כולם" selected>כולם</option>
              <option
                *ngFor="let status of transferStatusNamesArray"
                [value]="status"
              >
                {{ status }}
              </option>
            </select>
            <p style="font-weight: bold; text-align: right; margin-right: 20px">
              ({{ this.data.length }}) כמות
            </p>
          </div>
        </th>

        <th style="font-weight: bold; text-align: right"></th>
        <th style="font-weight: bold; text-align: right"></th>
      </tr>
    </thead>

    <tr>
      <td colspan="2">
        <!-- טבלת נתונים משווק עצמאי -->
        <table
          *ngIf="this.check_is_shivokim_Independent && this.isSplit === 'ראשי'"
          class="table no-margin"
        >
          <thead>
            <tr>
              <th style="font-weight: bold; text-align: right">תאריך הפקה</th>
              <th style="font-weight: bold; text-align: right">תאריך קליטה</th>
              <th style="font-weight: bold; text-align: right">מס תעודה</th>
              <th style="font-weight: bold; text-align: right">שם משק</th>
              <th style="font-weight: bold; text-align: right">מס להקה</th>
              <th style="font-weight: bold; text-align: right">מס מגדל</th>
              <th style="font-weight: bold; text-align: right">שם מגדל</th>
              <th style="font-weight: bold; text-align: right">ישוב המשק</th>
              <th style="font-weight: bold; text-align: right">
                שם משווק בפועל
              </th>
              <th style="font-weight: bold; text-align: right">
                מכון מיון בפועל
              </th>
              <th style="font-weight: bold; text-align: right">סהכ ביצים</th>
              <th style="font-weight: bold; text-align: right">סטטוס משלוח</th>
            </tr>
          </thead>

          <tbody style="white-space: nowrap">
            <tr *ngFor="let row of data">
              <!-- ht">תאריך הפקה -->
              <td>{{ row.create_date | date : "dd/MM/yyyy" }}</td>

              <!-- תאריך קליטה -->
              <td>{{ row.klita_date | date : "dd/MM/yyyy" }}</td>

              <!-- >מס תעודה -->
              <td>{{ row.certificate_id }}</td>

              <!-- שם משק -->
              <td>{{ row.farm_name }}</td>

              <!-- מס להקה -->
              <td>{{ row.flock_id }}</td>

              <!-- מס מגדל -->
              <td>{{ row.lull2000_code }}</td>

              <!-- שם מגדל -->
              <td>{{ row.grower_name }}</td>

              <!--ישוב המשק   -->
              <td>{{ row.farm_settlement_name }}</td>

              <!-- שם משווק בפועל -->
              <td>{{ row.msvk_name }}</td>

              <!-- מכון מיון בפועל -->
              <td>{{ row.egg_factory_name }}</td>

              <!-- סהכ ביצים -->
              <td>{{ row.egg_sum | number : "0.0" }}</td>
              <td>מיון עצמאי</td>
            </tr>
          </tbody>
        </table>

        <!-- טבלת נתונים משווק רגיל -->
        <table
          *ngIf="!this.check_is_shivokim_Independent && this.isSplit === 'ראשי'"
          class="table no-margin"
        >
          <thead>
            <tr>
              <th style="font-weight: bold; text-align: right">תאריך הפקה</th>
              <th style="font-weight: bold; text-align: right">תאריך קליטה</th>
              <th style="font-weight: bold; text-align: right">מס תעודה</th>
              <th style="font-weight: bold; text-align: right">שם משק</th>
              <th style="font-weight: bold; text-align: right">מס להקה</th>
              <th style="font-weight: bold; text-align: right">מס מגדל</th>
              <th style="font-weight: bold; text-align: right">שם מגדל</th>
              <th style="font-weight: bold; text-align: right">ישוב המשק</th>
              <th style="font-weight: bold; text-align: right">
                שם משווק בפועל
              </th>
              <th style="font-weight: bold; text-align: right">
                מכון מיון בפועל
              </th>
              <th style="font-weight: bold; text-align: right">סוג אריזה</th>
              <th style="font-weight: bold; text-align: right">כמות</th>
              <th style="font-weight: bold; text-align: right">סהכ ביצים</th>
              <th style="font-weight: bold; text-align: right">סטטוס משלוח</th>
              <th style="font-weight: bold; text-align: right">בין משווקים</th>
              <th style="font-weight: bold; text-align: right">
                מחסן ביצים צמוד
              </th>
            </tr>
          </thead>

          <tbody style="white-space: nowrap">
            <tr *ngFor="let row of data">
              <!-- ht">תאריך הפקה -->
              <td>{{ row.create_date | date : "dd/MM/yyyy" }}</td>

              <!-- תאריך קליטה -->
              <td>{{ row.transfer_date | date : "dd/MM/yyyy" }}</td>

              <!-- >מס תעודה -->
              <td>{{ row.certificate_id }}</td>

              <!-- שם משק -->
              <td>{{ row.farm_name + " - " + row.farm_code }}</td>

              <!-- מס להקה -->
              <td>{{ row.flock_id }}</td>

              <!-- מס מגדל -->
              <td>{{ row.lull2000_code }}</td>

              <!-- שם מגדל -->
              <td>{{ row.grower_name }}</td>

              <!--ישוב המשק   -->
              <td>{{ row.farm_settlement_name }}</td>

              <!-- שם משווק בפועל -->
              <td>{{ row.msvk_name }}</td>

              <!-- מכון מיון בפועל -->
              <td>{{ row.egg_factory_name }}</td>

              <!-- סוג אריזה  -->
              <td>{{ row.transport_type_name }}</td>

              <!-- כמות -->
              <td>{{ row.total_count }}</td>

              <!-- סהכ ביצים -->
              <td>{{ row.total_transfer_egg_sum | number : "0.0" }}</td>

              <!-- סטטוס משלוח -->
              <td>{{ row.transfer_status_name }}</td>

              <!-- בין משקים -->
              <td>{{ row.is_between_egg_factory1 }}</td>

              <!-- מחסן ביצים צמוד -->
              <td *ngIf="row.egg_warehouse_name === null"></td>
              <td *ngIf="row.egg_warehouse_name !== null">
                {{ row.egg_warehouse_name }}
              </td>
            </tr>
            <br />

            <tr>
              <td>
                כמות עגלות: {{ this.total_count_packege | number : "0.0" }}
              </td>

              <td>כמות ביצים: {{ this.total_count_agges | number : "0.0" }}</td>
              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>

              <td></td>
            </tr>
          </tbody>
        </table>

        <!-- טבלת נתונים פיצול -->
        <table *ngIf="this.isSplit === 'מפוצל'" class="table no-margin">
          <thead>
            <tr>
              <th style="font-weight: bold; text-align: right">תאריך הפקה</th>
              <th style="font-weight: bold; text-align: right">שם משק</th>
              <th style="font-weight: bold; text-align: right">מס להקה</th>
              <th style="font-weight: bold; text-align: right">מס מגדל</th>
              <th style="font-weight: bold; text-align: right">שם מגדל</th>
              <th style="font-weight: bold; text-align: right">ישוב המשק</th>
              <th style="font-weight: bold; text-align: right">שם משווק בפועל</th>
              <th style="font-weight: bold; text-align: right">מכון מיון בפועל</th>
              <th style="font-weight: bold; text-align: right">כמות</th>
            </tr>
          </thead>

          <tbody style="white-space: nowrap">
            <tr *ngFor="let row of data">
              <!-- ht">תאריך הפקה -->
              <td>{{ row.produce_date | date : "dd/MM/yyyy" }}</td>
              
              <!-- שם משק -->
              <td>{{ row.farm_name + " - " + row.farm_code }}</td>

              <!-- מס להקה -->
              <td>{{ row.flock_id }}</td>

              <!-- מס מגדל -->
              <td>{{ row.lull2000_code }}</td>

              <!-- שם מגדל -->
              <td>{{ row.grower_name }}</td>

              <!--ישוב המשק   -->
              <td>{{ row.settlement_name }}</td>

              <!-- שם משווק בפועל -->
              <td>{{ row.msvk_name }}</td>

              <!-- מכון מיון בפועל -->
              <td>{{ row.egg_factory_subquery }}</td>

              <!-- כמות -->
              <td>{{ row.marketing_sum }}</td>
            </tr>
          </tbody>
        </table>
      </td>
    </tr>
  </table>
</div>
