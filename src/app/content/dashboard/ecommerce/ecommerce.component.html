<!-- <div *ngIf="isLoading_FarmDetails" class="loader"></div> -->
<!-- <div
  *ngIf="!isLoading_FarmDetails"
  class="app-content content"
  [id]="'ecommerceId'"
> -->
<div class="app-content content" [id]="'ecommerceId'">
  <div class="content-wrapper">
    <div class="content-header row mb-1"></div>
    <div class="content-body">
      <!-- eCommerce statistic ------------------------------------------------------------------------------------------------------------------------>
      <!-- תשלום -->
      <div class="row" style="direction: rtl">
        <div class="col-xl-2 col-lg-6 col-12">
          <div class="card pull-up">
            <div class="card-content">
              <div class="card-body card_padding">
                <div class="media d-flex">
                  <div class="media-body text-left">
                    <h3 class="info">תשלום</h3>
                    <h6>תשלום</h6>
                  </div>
                  <div>
                    <i
                      class="icon-basket-loaded info font-large-2 float-right"
                    ></i>
                  </div>
                </div>
                <div class="mb-0 mt-1">
                  <ngb-progressbar
                    height="7px"
                    width="100%"
                    type="gradient-x-info"
                    [value]="80"
                  ></ngb-progressbar>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- רב שנתי -->
        <div class="col-xl-2 col-lg-6 col-12">
          <div class="card pull-up">
            <div class="card-content">
              <div class="card-body card_padding">
                <div class="media d-flex">
                  <div class="media-body text-left">
                    <h3 class="info">רב שנתי</h3>
                    <h6>פרטים מורחבים</h6>
                  </div>
                  <div>
                    <i
                      class="icon-basket-loaded info font-large-2 float-right"
                    ></i>
                  </div>
                </div>
                <div class="mb-0 mt-1">
                  <ngb-progressbar
                    height="7px"
                    width="100%"
                    type="gradient-x-info"
                    [value]="80"
                  ></ngb-progressbar>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- תעודות -->
        <div
          class="col-xl-2 col-lg-6 col-12"
          (click)="shows_certificates_by_grewernum()"
        >
          <div class="card pull-up">
            <div class="card-content">
              <div class="card-body card_padding">
                <div class="media d-flex">
                  <div class="media-body text-left">
                    <h3 class="warning">תעודות</h3>
                    <h6>פרטי תעודות</h6>
                  </div>
                  <div>
                    <i
                      class="icon-pie-chart warning font-large-2 float-right"
                    ></i>
                  </div>
                </div>
                <div class="mb-0 mt-1">
                  <ngb-progressbar
                    height="7px"
                    width="100%"
                    type="gradient-x-warning"
                    [value]="65"
                  >
                  </ngb-progressbar>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- סיכום חודשי -->
        <div class="col-xl-2 col-lg-6 col-12">
          <div class="card pull-up">
            <div class="card-content">
              <div class="card-body card_padding">
                <div class="media d-flex">
                  <div class="media-body text-left">
                    <h3 class="success">סיכום חודשי</h3>
                    <h6>סיכום חודשי</h6>
                  </div>
                  <div>
                    <i
                      class="icon-user-follow success font-large-2 float-right"
                    ></i>
                  </div>
                </div>
                <div class="mb-0 mt-1">
                  <ngb-progressbar
                    height="7px"
                    width="100%"
                    type="gradient-x-success"
                    [value]="75"
                  ></ngb-progressbar>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- כרטיס מגדל -->
        <div *ngIf="isLoading_userDet" class="loader_grower_cart"></div>
        <div
          *ngIf="!isLoading_userDet"
          class="col-xl-2 col-lg-6 col-12"
          (click)="testCart()"
        >
          <div class="card pull-up">
            <div class="card-content">
              <div class="card-body card_padding">
                <div class="media d-flex">
                  <div class="media-body text-left">
                    <h3 class="danger">כרטיס מגדל</h3>
                    <h6>פרטי מגדל</h6>
                  </div>
                  <div>
                    <i class="icon-heart danger font-large-2 float-right"></i>
                  </div>
                </div>
                <div class="mb-0 mt-1">
                  <ngb-progressbar
                    height="7px"
                    width="100%"
                    type="gradient-x-danger"
                    [value]="85"
                  ></ngb-progressbar>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--חיפוש לפי שנה-->
        <div class="col-xl-2 col-lg-6 col-12">
          <div class="card pull-up search_by_year">
            <div class="card-content">
              <div class="card-body card_padding">
                <div class="media d-flex">
                  <div class="media-body text-left"></div>
                  <div class="year-select rtl_Style">
                    שנה:
                    <select [(ngModel)]="chosenYear" (change)="onYearChange()">
                      <option *ngFor="let year of years" [value]="year">
                        {{ year }}
                      </option>
                    </select>
                  </div>
                </div>
                <div class="mb-0 mt-1">
                  <ngb-progressbar
                    height="7px"
                    width="100%"
                    type="gradient-x-danger"
                    [value]="85"
                  ></ngb-progressbar>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--/ eCommerce statistic ------   ------------------------------------------------------------------------------------------------------------------>

      <!-- Products sell and New Orders ------------------------------------------------------------------------------------------------------------------------>
      <div class="row">
        <!-- טבלה התראות ------------------------------------------------------------------------------------------------------------------------>
        <div
          class="col-xl-2 col-12"
          style="background-color: white; height: fit-content"
        >
          <div class="row match_height">
            <div id="recent-transactions" class="col-12">
              <div class="table-responsive card-micsa">
                <div class="card-header"></div>
                <div class="card-content">
                  <div class="eexel_and_total">
                    <div class="importBth"></div>

                    <div>
                      <h1 class="rtl_Style" style="margin-top: 12px">התראות</h1>
                    </div>
                  </div>
                  <div
                    class="table-container"
                    fxFlex="auto"
                    [perfectScrollbar]="config"
                  >
                    <table
                      class="table table-hover border_bottom detailsTable"
                      style="direction: rtl"
                    >
                      <thead class="detailsTable">
                        <!-- מגדל יוש -->
                        <tr
                          *ngIf="
                            this.userDetails_more_info &&
                            this.userDetails_more_info.length > 0 &&
                            this.userDetails_more_info[0]?.v_YzYosh
                          "
                        >
                          <div
                            *ngIf="
                              this.userDetails_more_info[0]?.v_YzYosh === 1
                            "
                          >
                            <th scope="col" class="border-top-0">מגדל יו''ש</th>
                            <th scope="col" class="border-top-0">
                              <div
                                [ngSwitch]="
                                  this.userDetails_more_info[0]?.v_YzYosh
                                "
                              >
                                <span
                                  *ngSwitchCase="'1'"
                                  style="color: green; font-size: 2rem"
                                  >√</span
                                >
                                <span
                                  *ngSwitchDefault
                                  style="color: red; font-size: 2rem"
                                  >X</span
                                >
                              </div>
                            </th>
                          </div>
                        </tr>

                        <!--מגדל גידול עצמי-->

                        <tr
                          *ngIf="
                            this.userDetails_more_info &&
                            this.userDetails_more_info.length > 0 &&
                            this.userDetails_more_info[0]?.v_SelfGrower
                          "
                        >
                          <div
                            *ngIf="
                              userDetails_more_info[0]?.v_SelfGrower === '1'
                            "
                          >
                            <th scope="col" class="border-top-0">
                              מגדל גידול עצמי
                            </th>
                            <th scope="col" class="border-top-0">
                              <div
                                [ngSwitch]="
                                  userDetails_more_info[0]?.v_SelfGrower
                                "
                              >
                                <span
                                  *ngSwitchCase="'1'"
                                  style="color: green; font-size: 2rem"
                                  >√</span
                                >
                                <!-- <span
                                    *ngSwitchDefault
                                    style="color: red; font-size: 2rem"
                                    >X</span
                                  > -->
                              </div>
                            </th>
                          </div>
                        </tr>

                        <!-- מגדל דור ב -->
                        <tr
                          *ngIf="
                            this.userDetails_more_info &&
                            this.userDetails_more_info.length > 0 &&
                            this.userDetails_more_info[0]?.v_Dor_bet
                          "
                        >
                          <div
                            *ngIf="userDetails_more_info[0]?.v_Dor_bet === '1'"
                          >
                            <th scope="col" class="border-top-0">
                              מגדל דור ב'
                            </th>
                            <th scope="col" class="border-top-0">
                              <div
                                [ngSwitch]="userDetails_more_info[0]?.v_Dor_bet"
                              >
                                <span
                                  *ngSwitchCase="'1'"
                                  style="color: green; font-size: 2rem"
                                  >√</span
                                >
                                <span
                                  *ngSwitchDefault
                                  style="color: red; font-size: 2rem"
                                  >X</span
                                >
                              </div>
                            </th>
                          </div>
                        </tr>

                        <!-- רישיון עסק -->
                        <tr *ngIf="McsRishaion_Esek_number_type">
                          <div *ngIf="McsRishaion_Esek_number_type !== 0">
                            <th scope="col" class="border-top-0">
                              {{ businessLicense_all_details }}
                            </th>
                            <th>
                              <div>
                                <span style="color: green; font-size: 2rem"
                                  >√</span
                                >
                              </div>
                            </th>
                          </div>
                        </tr>

                        <!-- מגדל צריכה עצמית -->

                        <tr
                          *ngIf="
                            this.userDetails_more_info &&
                            this.userDetails_more_info.length > 0 &&
                            this.userDetails_more_info[0]?.v_SelfConsum
                          "
                        >
                          <div
                            *ngIf="
                              userDetails_more_info[0]?.v_SelfConsum === '1'
                            "
                          >
                            <th scope="col" class="border-top-0">
                              מגדל צריכה עמצאית
                            </th>
                            <th scope="col" class="border-top-0">
                              <div
                                [ngSwitch]="
                                  userDetails_more_info[0]?.v_SelfConsum
                                "
                              >
                                <span
                                  *ngSwitchCase="'1'"
                                  style="color: green; font-size: 2rem"
                                  >√</span
                                >
                                <span
                                  *ngSwitchDefault
                                  style="color: red; font-size: 2rem"
                                  >X</span
                                >
                              </div>
                            </th>
                          </div>
                        </tr>

                        <!-- אישור שוט -->
                        <tr *ngIf="shot_confirmation === '1'">
                          <th scope="col" class="border-top-0">אישור שוט</th>

                          <th>
                            <div>
                              <span style="color: green; font-size: 2rem">
                                √
                              </span>
                            </div>
                          </th>
                        </tr>

                        <!--  עזבון -->
                        <tr *ngIf="checkIzavon">
                          <th scope="col" class="border-top-0">
                            עיזבון
                            <span style="color: green; font-size: 2rem">
                              √
                            </span>
                          </th>
                          <th
                            scope="col"
                            class="border-top-0"
                            align="left"
                            style="cursor: pointer"
                            (click)="Popup_Izavon()"
                            id="Popup_Izavon"
                          >
                            <i class="fas fa-angle-left fa-lg"></i>
                          </th>
                        </tr>

                        <!--  התראה בן זוג שותף -->
                        <tr *ngIf="Check_Ben_Zug_Shotaf">
                          <th scope="col" class="border-top-0">
                            בן זוג שותף
                            <span style="color: green; font-size: 2rem">
                              √
                            </span>
                          </th>
                        </tr>

                        <!-- התראה כפל גידול-->
                        <tr *ngIf="Check_v_name_kaful">
                          <th scope="col" class="border-top-0">
                            כפל גידול
                            <span style="color: green; font-size: 2rem">
                              √
                            </span>
                          </th>
                        </tr>

                        <!-- התראה כתובת שונה למגדל-->
                        <tr *ngIf="yzrn_have_other_addr">
                          <th scope="col" class="border-top-0">
                            קיים למגדל כתובת מגורים שונה
                            <span style="color: green; font-size: 2rem">
                              √
                            </span>
                          </th>
                          <th
                            scope="col"
                            class="border-top-0"
                            align="left"
                            style="cursor: pointer"
                            (click)="Popup_Grower_Other_Addr()"
                            id="Popup_Grower_Other_Addr"
                          >
                            <i class="fas fa-angle-left fa-lg"></i>
                          </th>
                        </tr>

                        <!-- התראה שם מגדל ישן-->
                        <tr *ngIf="checkOldGrowerName">
                          <th scope="col" class="border-top-0">
                            שם מגדל ישן
                            <span style="color: green; font-size: 2rem">
                              √
                            </span>
                          </th>
                          <th
                            scope="col"
                            class="border-top-0"
                            align="left"
                            style="cursor: pointer"
                            (click)="Popup_Old_Grower_Name()"
                            id="Popup_Grower_Other_Addr"
                          >
                            <i class="fas fa-angle-left fa-lg"></i>
                          </th>
                        </tr>
                      </thead>

                      <tbody></tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--סיום טבלה התראות ------------------------------------------------------------------------------------------------------------------------>

        <!-- טבלה מכסות פטם והודים------------------------------------------------------------------------------------------------------------------------>

        <div
          *ngIf="
            (mihsotPetem.length > 0 || mihsotHodim.length > 0) &&
            mihsot.length > 0
          "
          class="col-xl-3 col-12"
        >
          <div *ngIf="isLoading_userDet" class="loader"></div>
          <div class="row match_height" *ngIf="!isLoading_userDet">
            <div id="recent-transactions" class="col-12">
              <div
                class="card card-micsa"
                style="padding-right: 15px !important"
              >
                <div class="card-header"></div>
                <div class="card-content">
                  <!-- <div class="exel_and_total"></div> -->

                  <div class="table-container micsotStyle2">
                    <!-- טבלת מכסות פטם -->
                    <div *ngIf="mihsotPetem.length > 0">
                      <div>
                        <h1 class="rtl_Style">מכסת פטם :</h1>
                      </div>

                      <tr>
                        <td><B>ג''ח</B></td>
                        <td class="text-truncate row_padding">
                          <div
                            *ngFor="let obj of arrPartnersPetem; let i = index"
                          >
                            <div *ngIf="!obj?.numGroup; else elseBlock"></div>
                            <ng-template
                              #elseBlock
                              style="padding: none !important"
                            >
                              <ng-container *ngIf="isFirstUniqueValue(obj, i)">
                                <div *ngIf="obj.numGroup">
                                  <button
                                    id="gidolHotzBtn"
                                    style="
                                      color: blue;
                                      background-color: white !important;
                                      border: none;
                                    "
                                    (click)="open_PopupPetemPartnersComponent()"
                                  >
                                    {{ obj.partners.length }} ({{
                                      obj.numGroup
                                    }})
                                  </button>
                                </div>
                                <ng-container
                                  *ngIf="hasMultipleUniqueValues(obj)"
                                >
                                  <span>&nbsp;</span>
                                </ng-container>
                              </ng-container>
                            </ng-template>
                          </div>
                        </td>
                      </tr>

                      <table
                        class="table table-hover border_bottom detailsTable"
                        style="direction: rtl"
                      >
                        <thead class="detailsTable">
                          <tr>
                            <th scope="col" class="border-top-0">סוג:</th>
                            <th scope="col" class="border-top-0">
                              שם סוג מכסה:
                            </th>
                            <th scope="col" class="border-top-0">כמות</th>
                            <th scope="col" class="border-top-0">מתאריך</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let row of mihsotPetem">
                            <td class="text-truncate row_padding">
                              {{ row.mi_sug_mcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_kamut | numberFormat }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_date_from | date : "dd/MM/yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <!-- טבלת מכסות פטם סיום-->

                    <!-- טבלת מכסות הודים -->
                    <div *ngIf="mihsotHodim.length > 0">
                      <h3 class="rtl_Style">מכסת הודים</h3>
                      <table
                        class="table table-hover border_bottom detailsTable"
                        style="direction: rtl"
                      >
                        <thead class="detailsTable">
                          <tr>
                            <th scope="col" class="border-top-0">סוג:</th>
                            <th scope="col" class="border-top-0">
                              שם סוג מכסה:
                            </th>
                            <th scope="col" class="border-top-0">כמות</th>
                            <th scope="col" class="border-top-0">מתאריך</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let row of mihsotHodim">
                            <td class="text-truncate row_padding">
                              {{ row.mi_sug_mcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_kamut | numberFormat }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_date_from | date : "dd/MM/yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <!-- טבלת מכסות הודים סיום-->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--סיום טבלה מכסות פטם והודים------------------------------------------------------------------------------------------------------------------------>

        <!-- טבלה מכסות ביצי הטלה------------------------------------------------------------------------------------------------------------------------>
        <div
          *ngIf="
            (mihsotPetem.length > 0 || mihsotHodim.length > 0) &&
            mihsot.length > 0
          "
          class="col-xl-3 col-12"
        >
          <div *ngIf="isLoading_userDet" class="loader"></div>
          <div class="row match_height" *ngIf="!isLoading_userDet">
            <div id="recent-transactions" class="col-12">
              <div class="card card-micsa">
                <div class="card-header"></div>
                <div class="card-content">
                  <div class="exel_and_total">
                    <div>
                      <p style="direction: rtl">
                        קבועה: {{ totalMicsaKvoha | numberFormat }}
                      </p>
                      <p style="direction: rtl">
                        לתשלום: {{ totalMicsaToPay | numberFormat }}
                      </p>
                    </div>
                    <div>
                      <h1 class="rtl_Style">מכסת ביצים</h1>
                    </div>
                  </div>

                  <div class="table-container micsotStyle">
                    <!-- טבלת מכסות ביצים  -->
                    <div style="overflow-x: hidden" *ngIf="mihsot.length > 0">
                      <div class="rtl_Style">
                        <tr>
                          <td style="margin-left: 50px"></td>

                          <td><B>ג''ח</B></td>
                          <td class="text-truncate row_padding">
                            <div *ngIf="theUserDetails?.pa_Counter > 0">
                              <button
                                id="gidolHotzBtn"
                                style="
                                  color: blue;
                                  background-color: white !important;
                                  border: none;
                                "
                                (click)="getPartner([obj])"
                              >
                                {{ theUserDetails.pa_Counter }} קיים ג''ח -
                              </button>
                            </div>
                          </td>
                        </tr>
                      </div>
                      <table
                        class="table table-hover border_bottom detailsTable"
                        style="direction: rtl"
                      >
                        <thead class="detailsTable">
                          <tr>
                            <th scope="col" class="border-top-0">סוג:</th>
                            <th scope="col" class="border-top-0">
                              שם סוג מכסה:
                            </th>
                            <th scope="col" class="border-top-0">כמות</th>
                            <th scope="col" class="border-top-0">מתאריך</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let row of mihsot">
                            <td class="text-truncate row_padding">
                              {{ row.mi_sug_mcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_kamut | numberFormat }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_date_from | date : "dd/MM/yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <!-- טבלת מכסות ביצים סיום -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ---------- תצוגה 2 ----------->

        <!-- טבלה מכסות פטם והודים------------------------------------------------------------------------------------------------------------------------>
        <div
          *ngIf="
            (mihsotPetem.length > 0 || mihsotHodim.length > 0) &&
            mihsot.length === 0
          "
          class="col-xl-6 col-12"
        >
          <div *ngIf="isLoading_userDet" class="loader"></div>
          <div class="row match_height" *ngIf="!isLoading_userDet">
            <div id="recent-transactions" class="col-12">
              <div
                class="card card-micsa"
                style="padding-right: 15px !important"
              >
                <div class="card-header"></div>
                <div class="card-content">
                  <div class="exel_and_total"></div>

                  <div class="table-container micsotStyle">
                    <!-- טבלת מכסות פטם -->
                    <div *ngIf="mihsotPetem.length > 0">
                      <div>
                        <h1 class="rtl_Style">מכסת פטם</h1>
                      </div>
                      <tr>
                        <td><B>ג''ח</B></td>
                        <td class="text-truncate row_padding">
                          <div
                            *ngFor="let obj of arrPartnersPetem; let i = index"
                          >
                            <div *ngIf="!obj?.numGroup; else elseBlock"></div>
                            <ng-template
                              #elseBlock
                              style="padding: none !important"
                            >
                              <ng-container *ngIf="isFirstUniqueValue(obj, i)">
                                <div *ngIf="obj.numGroup">
                                  <button
                                    id="gidolHotzBtn"
                                    style="
                                      color: blue;
                                      background-color: white !important;
                                      border: none;
                                    "
                                    (click)="open_PopupPetemPartnersComponent()"
                                  >
                                    {{ obj.partners.length }} ({{
                                      obj.numGroup
                                    }})
                                  </button>
                                </div>
                                <ng-container
                                  *ngIf="hasMultipleUniqueValues(obj)"
                                >
                                  <span>,</span>
                                </ng-container>
                              </ng-container>
                            </ng-template>
                          </div>
                        </td>
                      </tr>

                      <table
                        class="table table-hover border_bottom detailsTable"
                        style="direction: rtl"
                      >
                        <thead class="detailsTable">
                          <tr>
                            <th scope="col" class="border-top-0">סוג:</th>
                            <th scope="col" class="border-top-0">
                              שם סוג מכסה:
                            </th>
                            <!-- <th scope="col" class="border-top-0">סוג תוספת:</th> -->
                            <th scope="col" class="border-top-0">כמות</th>
                            <th scope="col" class="border-top-0">מתאריך</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let row of mihsotPetem">
                            <td class="text-truncate row_padding">
                              {{ row.mi_sug_mcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa }}
                            </td>

                            <!-- <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa7 }}
                            </td> -->

                            <td class="text-truncate row_padding">
                              {{ row.mi_kamut | numberFormat }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_date_from | date : "dd/MM/yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <!-- טבלת מכסות פטם סיום-->

                    <!-- טבלת מכסות הודים -->
                    <div *ngIf="mihsotHodim.length > 0">
                      <h3 class="rtl_Style">מכסת הודים</h3>
                      <table
                        class="table table-hover border_bottom detailsTable"
                        style="direction: rtl"
                      >
                        <thead class="detailsTable">
                          <tr>
                            <th scope="col" class="border-top-0">סוג:</th>
                            <th scope="col" class="border-top-0">
                              שם סוג מכסה:
                            </th>
                            <th scope="col" class="border-top-0">כמות</th>
                            <th scope="col" class="border-top-0">מתאריך</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let row of mihsotHodim">
                            <td class="text-truncate row_padding">
                              {{ row.mi_sug_mcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_kamut | numberFormat }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_date_from | date : "dd/MM/yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <!-- טבלת מכסות הודים סיום-->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!--סיום טבלה מכסות פטם והודים------------------------------------------------------------------------------------------------------------------------>
        </div>

        <!--סיום טבלה מכסות ------------------------------------------------------------------------------------------------------------------------>

        <!-- -------------------- תצוגה 3 ------------------------->

        <!-- טבלה מכסות ביצי הטלה------------------------------------------------------------------------------------------------------------------------>

        <!-- <div *ngIf="isLoading_userDet" class="loader"></div>
                <div *ngIf="!isLoading_userDet"> -->

        <div
          *ngIf="
            mihsot.length > 0 &&
            mihsotPetem.length === 0 &&
            mihsotHodim.length === 0
          "
          class="col-xl-6 col-12"
        >
          <div *ngIf="isLoading_userDet" class="loader"></div>
          <div class="row match_height" *ngIf="!isLoading_userDet">
            <div id="recent-transactions" class="col-12">
              <div class="card card-micsa">
                <div class="card-header"></div>
                <div class="card-content">
                  <div class="exel_and_total">
                    <div>
                      <p style="direction: rtl">
                        קבועה: {{ totalMicsaKvoha | numberFormat }}
                      </p>
                      <p style="direction: rtl">
                        לתשלום: {{ totalMicsaToPay | numberFormat }}
                      </p>
                    </div>
                    <div>
                      <h1 class="rtl_Style">מכסת ביצים</h1>
                    </div>
                  </div>

                  <div class="table-container micsotStyle">
                    <!-- טבלת מכסות ביצים  -->
                    <div style="overflow-x: hidden" *ngIf="mihsot.length > 0">
                      <div class="rtl_Style">
                        <tr>
                          <td style="margin-left: 50px"></td>

                          <td><B>ג''ח</B></td>
                          <td class="text-truncate row_padding">
                            <div *ngIf="theUserDetails?.pa_Counter">
                              <div *ngIf="theUserDetails?.pa_Counter > 0">
                                <button
                                  id="gidolHotzBtn"
                                  style="
                                    color: blue;
                                    background-color: white !important;
                                    border: none;
                                    direction: rtl;
                                  "
                                  (click)="getPartner([obj])"
                                >
                                  קיים ג''ח -
                                  {{ theUserDetails.pa_Counter }}
                                </button>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </div>
                      <table
                        class="table table-hover border_bottom detailsTable"
                        style="direction: rtl"
                      >
                        <thead class="detailsTable">
                          <tr>
                            <th scope="col" class="border-top-0">סוג:</th>
                            <th scope="col" class="border-top-0">
                              שם סוג מכסה:
                            </th>
                            <th scope="col" class="border-top-0">כמות</th>
                            <th scope="col" class="border-top-0">מתאריך</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let row of mihsot">
                            <td class="text-truncate row_padding">
                              {{ row.mi_sug_mcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.nameSugMcsa }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_kamut | numberFormat }}
                            </td>

                            <td class="text-truncate row_padding">
                              {{ row.mi_date_from | date : "dd/MM/yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <!-- טבלת מכסות ביצים סיום -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          *ngIf="
            mihsot.length === 0 &&
            mihsotPetem.length === 0 &&
            mihsotHodim.length === 0
          "
          class="col-xl-6 col-12"
        ></div>

        <!-- טבלת פרטי מגדל ------------------------------------------------------------------------------------------------------------------------>

        <div *ngIf="true" class="col-xl-4 col-lg-12 growerDetails">
          <m-card
            [options]="options"
            (reloadFunction)="reloadNewOrders($event)"
          >
            <ng-container mCardContent>
              <div id="new-orders" class="media-list position-relative">
                <div class="table-responsive card-micsa">
                  <div>
                    <div class="card-header"></div>
                    <h1>פרטי מגדל</h1>
                    <table class="table" style="direction: rtl">
                      <tbody
                        *ngIf="
                          this.userDetails_more_info &&
                          this.userDetails_more_info.length > 0
                        "
                      >
                        <tr>
                          <td><B>שם יצרן</B></td>

                          <td>
                            {{ this.userDetails_more_info[0]?.v_shem_yzrn }}
                          </td>

                          <td><B>מספר יצרן</B></td>
                          <td>{{ this.userDetails_more_info[0]?.v_yzrn }}</td>
                          <td
                            align="left"
                            style="cursor: pointer"
                            (click)="openPopup_Of_OldGrower()"
                            id="openPopup_Of_OldGrowerBtn"
                          >
                            <i class="fas fa-angle-left fa-lg"></i>
                          </td>
                        </tr>
                        <tr>
                          <td><B>כתובת</B></td>
                          <td>
                            {{
                              this.userDetails_more_info[0]?.v_ktovet +
                                "," +
                                this.userDetails_more_info[0]?.v_ktovet1
                            }}
                          </td>
                        </tr>

                        <tr>
                          <td><B>נחלה</B></td>
                          <td>
                            {{ userDetails_more_info[0]?.v_msk }}
                          </td>
                        </tr>

                        <tr>
                          <td><B>ת.ז</B></td>
                          <td>{{ this.userDetails_more_info[0]?.v_zehut }}</td>

                          <td><B>טלפון</B></td>
                          <td>
                            {{ this.userDetails_more_info[0]?.v_tel1 }}
                          </td>
                        </tr>
                        <tr>
                          <td><B>ישוב</B></td>
                          <td>
                            {{ this.userDetails_more_info[0]?.v_shem_yeshuv }}
                          </td>

                          <td>
                            <B>טלפון נוסף</B>
                          </td>
                          <td>
                            {{ this.userDetails_more_info[0]?.tel }}
                          </td>
                        </tr>
                        <tr>
                          <td><B>סוג מגדל</B></td>
                          <td [ngSwitch]="userDetails_more_info[0]?.Rashi">
                            <span
                              *ngSwitchCase="'1'"
                              style="
                                font-size: 19px;
                                font-weight: 600;
                                color: green;
                              "
                              >ראשי</span
                            >
                            <span
                              *ngSwitchCase="'0'"
                              style="
                                font-size: 19px;
                                font-weight: 600;
                                color: red;
                              "
                              >שותף</span
                            >
                            <span
                              *ngSwitchDefault
                              style="
                                font-size: 19px;
                                font-weight: 600;
                                color: blue;
                              "
                              >פרטני</span
                            >
                          </td>
                          <td><B>מייל</B></td>
                          <td>
                            {{ this.userDetails_more_info[0]?.v_Email }}
                          </td>
                        </tr>

                        <!-- <tr class="numKannat"></tr> -->
                        <tr
                          *ngFor="let row of kannatNum_and_oldMegadelNum"
                          class=""
                        >
                          <th>{{ row.NameMsvkExt }}</th>
                          <th>{{ row.YazExtrnl }}</th>
                        </tr>

                        <tr>
                          <td
                            style="cursor: pointer; color: green"
                            (click)="openPopup_more_info_grower()"
                            id="moreInfoBtn"
                          >
                            פרטים נוספים
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </ng-container>
          </m-card>
        </div>
        <!-- סיום טבלת פרטי מגדל ------------------------------------------------------------------------------------------------------------------------>
      </div>
      <!-- טבלת פרטי משקים ------------------------------------------------------------------------------------------------------------------------>

      <div class="row match_height">
        <div id="recent-transactions" class="col-12">
          <div class="card">
            <div class="card-header"></div>
            <div class="card-content">
              <div class="exel_and_total">
                <div class="importBth">
                  <div class="justify-content">
                    <img
                      class="logoIngStyle"
                      src="assets/images/logo/excel.png"
                      alt="Image"
                      (click)="getExcelDataFarmDetails()"
                    />
                  </div>
                </div>
                <div class="check">
                  <div style="display: flex">
                    <div
                      *ngIf="Not_Active_FarmDetails.length > 0"
                      (click)="show_not_ActiveSite()"
                      style="
                        color: blue;
                        text-decoration: underline;
                        cursor: pointer;
                        margin-left: 25px;
                        font-size: larger;
                      "
                      [class.active-site]="click_on_not_show_ActiveSite"
                    >
                      ({{ Not_Active_FarmDetails.length }}) לא פעילים
                    </div>

                    <div
                      *ngIf="Active_FarmDetails.length > 0"
                      (click)="show_ActiveSite()"
                      style="
                        color: blue;
                        text-decoration: underline;
                        cursor: pointer;
                        margin-left: 25px;
                        font-size: larger;
                      "
                      [class.active-site]="click_on_show_ActiveSite"
                    >
                      ({{ Active_FarmDetails.length }}) פעילים
                    </div>

                    <!-- <button
                      (click)="this.sort_site_by_shloha()"
                      style="margin-left: 20px; margin-right: 20px"
                    >
                      חיפוש לפי שלוחה
                    </button> -->
                  </div>

                  <div
                    (click)="this.sort_site_by_shloha()"
                    style="margin-left: 30px"
                    class="site_by_shlohot_btn"
                  >
                    <div>
                      <select
                        [(ngModel)]="selectedCategory"
                        (change)="selectCategory($event.target.value)"
                        class="form-select form-select-lg"
                        style="font-size: larger"
                      >
                        <option value="" disabled selected>שלוחה</option>
                        <option
                          *ngFor="let obj of keys_of_categorizedArrays"
                          [value]="obj"
                          [selected]="selectedCategory === obj"
                        >
                          {{ getCategoryLabel(obj) }}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
 

              <div *ngIf="isLoading_FarmDetails" class="loader"></div>
              <div *ngIf="!isLoading_FarmDetails">
                <table class="" style="direction: rtl; width: 100%">
                  <thead class="detailsTable">
                    <tr>
                      <th scope="col" class="border-top-0">מס' אתר</th>
                      <th scope="col" class="border-top-0">שם אתר</th>

                      <th scope="col" class="border-top-0">יישוב</th>
                      <th scope="col" class="border-top-0">ק. השתייכות</th>
                      <th scope="col" class="border-top-0">סוג משק</th>
                      <th scope="col" class="border-top-0">סוג מבנה</th>

                      <th scope="col" class="border-top-0">מס להקה</th>

                      <th scope="col" class="border-top-0">תאריך בקיעה</th>

                      <th scope="col" class="border-top-0">גיל בשבועות</th>

                      <th scope="col" class="border-top-0">גיל בחודשים</th>
                      <th scope="col" class="border-top-0">קיבולת לול</th>
                      <th scope="col" class="border-top-0">איכלוס</th>
                      <th scope="col" class="border-top-0">איכלוס 750</th>

                      <th scope="col" class="border-top-0">לול מחיצה</th>

                      <th scope="col" class="border-top-0">יש היתר אכלוס</th>

                      <th scope="col" class="border-top-0">תנאי אימון</th>

                      <th scope="col" class="border-top-0">מס גוש</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngFor="let row of rows"
                      [class.green-background]="activeColor"
                      [class.red-background]="notActiveColor"
                    >
                      <!-- <th scope="col" class="border-top-0">מס' אתר</th> -->
                      <td class="text-truncate row_padding">
                        {{ row.farm_code }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">שם אתר</th> -->
                      <td class="text-truncate row_padding">
                        {{ row.farm_name }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">יישוב</th> -->
                      <td class="text-truncate row_padding">
                        {{ row.settlement_name }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">ק. השתייכות</th> -->
                      <td class="text-truncate row_padding">
                        {{ row.belonging_group_name }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">סוג משק</th> -->
                      <td
                        *ngIf="!row.name || row.name === null"
                        class="text-truncate row_padding"
                      ></td>
                      <td
                        *ngIf="row.name || row.name !== null"
                        class="text-truncate row_padding"
                      >
                        {{ row.name }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">סוג מבנה</th> -->

                      <td
                        *ngIf="
                          !row.hen_house_type_name ||
                          row.hen_house_type_name === null
                        "
                        class="text-truncate row_padding"
                      ></td>
                      <td
                        *ngIf="
                          row.hen_house_type_name ||
                          row.hen_house_type_name !== null
                        "
                        class="text-truncate row_padding"
                      >
                        {{ row.hen_house_type_name }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">מס להקה</th> -->
                      <td
                        *ngIf="
                          !row.active_flock_id || row.active_flock_id === null
                        "
                        class="text-truncate row_padding"
                      ></td>
                      <td
                        *ngIf="
                          row.active_flock_id || row.active_flock_id !== null
                        "
                        class="text-truncate row_padding"
                      >
                        {{ row.active_flock_id }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">תאריך בקיעה</th> -->
                      <td
                        *ngIf="
                          !row.flock_hatch_date || row.flock_hatch_date === null
                        "
                        class="text-truncate row_padding"
                      ></td>
                      <td
                        *ngIf="
                          row.flock_hatch_date || row.flock_hatch_date !== null
                        "
                        class="text-truncate row_padding"
                      >
                        {{ row.flock_hatch_date | date : "dd/MM/yyyy" }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">גיל בשבועות</th> -->
                      <td
                        *ngIf="
                          !row.flock_week_age || row.flock_week_age === null
                        "
                        class="text-truncate row_padding"
                      ></td>
                      <td
                        *ngIf="
                          row.flock_week_age || row.flock_week_age !== null
                        "
                        class="text-truncate row_padding"
                      >
                        {{ row.flock_week_age }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">גיל בחודשים</th> -->
                      <td
                        *ngIf="
                          !row.flock_month_age || row.flock_month_age === null
                        "
                        class="text-truncate row_padding"
                      ></td>
                      <td
                        *ngIf="
                          row.flock_month_age && row.flock_month_age !== null
                        "
                        class="text-truncate row_padding"
                      >
                        {{ row.flock_month_age }}
                      </td>
                      <!-- <th scope="col" class="border-top-0">קיבולת לול</th> -->
                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.kibolet_lul === ''"
                      >
                        {{ row.kibolet_lul }}
                      </td>
                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.kibolet_lul !== ''"
                      >
                        {{ row.kibolet_lul | numberFormat }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">איכלוס</th> -->
                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.hiclos_number === ''"
                      >
                        {{ row.hiclos_number }}
                      </td>
                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.hiclos_number !== ''"
                      >
                        {{ row.hiclos_number | numberFormat }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">איכלוס 750</th> -->
                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.calc750 === 0"
                      ></td>

                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.calc750 === ''"
                      >
                        {{ row.calc750 }}
                      </td>
                      <td
                        class="text-truncate row_padding"
                        *ngIf="row.calc750 !== '' && row.calc750 !== 0"
                      >
                        {{ row.calc750 | numberFormat }}
                      </td>

                      <!-- <th scope="col" class="border-top-0">לול מחיצה</th> -->
                      <!-- >יש - {{ row.farm_code }}/{{ splitHenHouseNum }}</span-->
                      <td class="text-truncate row_padding">
                        <span
                          style="color: green; font-size: 2rem !important"
                          *ngIf="
                            row.is_hen_house_split === 1 &&
                            splitHenHouseNum != -1
                          "
                          >√</span
                        >
                        <span
                          *ngIf="row.is_hen_house_split === 0"
                          style="color: red; font-size: 2rem !important"
                          >X</span
                        >
                      </td>

                      <!--<th scope="col" class="border-top-0">יש היתר אכלוס</th>-->
                      <td class="text-truncate row_padding">
                        <div [ngSwitch]="row.is_business_licenses">
                          <span
                            *ngSwitchCase="1"
                            style="color: green; font-size: 2rem !important"
                            >√</span
                          >
                          <span
                            *ngSwitchCase="0"
                            style="color: red; font-size: 2rem !important"
                            >X</span
                          >
                        </div>
                      </td>

                      <!--<th scope="col" class="border-top-0">תנאי אימון</th> -->
                      <td
                        class="text-truncate row_padding"
                        [ngSwitch]="row.is_not_allow_population_hatcher"
                      >
                        <span
                          *ngSwitchCase="0"
                          style="color: green; font-size: 2rem !important"
                          >√</span
                        >
                        <span
                          *ngSwitchCase="1"
                          style="color: red; font-size: 2rem !important"
                          >X</span
                        >
                      </td>

                      <!--<th scope="col" class="border-top-0">מס גוש</th> -->
                      <td class="text-truncate row_padding">
                        <span
                          *ngIf="row.block_id"
                          style="font-size: 20px !important"
                          >{{ row.block_id }} ({{ row.block_count }})</span
                        >
                        <span
                          *ngIf="!row.block_id || row.block_id === null"
                          style="color: red; font-size: 2rem !important"
                          >X</span
                        >
                      </td>
                    </tr>
                  </tbody>
                </table>
                <div>
                  <!-- <button
                    (click)="display_all_sites()"
                    type="button"
                    class="btn btn-warning"
                    style="margin: 15px !important; font-size: 25px !important"
                  >
                    ({{ length_of_total_site }}) להצגת כלל האתרים
                  </button> -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--סיום טבלת פרטי משקים ------------------------------------------------------------------------------------------------------------------------>

    <!-- Modal ------------------------------------------------------------------------------------------------------------------------>
    <div
      class="modal"
      id="growerModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-align-center">
          <div class="modal-content" style="width: 500px">
            <app-grower-details
              *ngIf="modalGrowerID"
              [growerID]="modalGrowerID"
            ></app-grower-details>
          </div>
        </div>
      </div>
    </div>

    <button
      id="btnModalGrower"
      style="display: none"
      type="button"
      class="btn btn-primary"
      data-toggle="modal"
      data-target="#growerModal"
    ></button>

    <!-- Modal -->
    <div
      class="modal"
      id="growerModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="vertical-alignment-helper">
        <div class="modal-dialog vertical-align-center">
          <div class="modal-content" style="width: 500px">
            <app-grower-details
              *ngIf="modalGrowerID"
              [growerID]="modalGrowerID"
            ></app-grower-details>
          </div>
        </div>
      </div>
    </div>
    <!--and Modal ------------------------------------------------------------------------------------------------------------------------>

    <!--/ Basic Horizontal Timeline -->
  </div>
</div>
<!-- ////////////////////////////////////////////////////////////////////////////-->
