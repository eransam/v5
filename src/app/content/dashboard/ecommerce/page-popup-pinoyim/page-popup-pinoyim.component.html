<div class="cool-table-container">
  <table class="cool-table main_table" dir="rtl" border="0">
    <thead>
      <tr>
        <th style="font-weight: bold; text-align: right">
          &nbsp;סה"כ פינויים
          {{ this.data[this.data.length - 1]["array_pinoyim_short"].length }}
        </th>

        <th style="font-weight: bold; text-align: right">פינויים</th>
      </tr>
    </thead>

    <tr>
      <td colspan="2">
        <table class="table no-margin table_inside">
          <thead>
            <tr>
              <th
                style="font-weight: bold; text-align: right; width: 50px"
              ></th>
              <th style="font-weight: bold; text-align: right; width: 145px">
                מס פינוי
              </th>
              <th style="font-weight: bold; text-align: right; width: 145px">
                תאריך פינוי
              </th>
              <th style="font-weight: bold; text-align: right; width: 145px">
                כמות פינוי
              </th>
            </tr>
          </thead>

          <tbody style="white-space: nowrap">
            <ng-container
              *ngFor="
                let p of this.data[this.data.length - 1]['array_pinoyim_short'];
                let i = index
              "
            >
              <tr>
                <td style="width: 50px" (click)="toggleExpansion(p)">
                  <!-- Add this line -->
                  <span class="expand-symbol" [class.expanded]="p.expanded"
                    >+</span
                  >
                </td>

                <td style="width: 145px">
                  {{ p.pinoy_id }}
                </td>

                <td style="width: 145px">
                  {{ p.pr_Datemsira | date : "dd/MM/yyyy" }}
                </td>
                <td style="width: 145px">
                  {{ p.total_pr_Kamut }}
                </td>
              </tr>

              <div *ngIf="p.expanded">
                <tr>
                  <td colspan="4">מס אתר</td>
                  <td colspan="4">תאריך פינוי</td>
                  <td colspan="4">כמות פינוי</td>
                  <td colspan="4">מס להקה</td>
                  <td colspan="4">שם פקח מבצע</td>
                  <td colspan="4">מס מגדל</td>
                </tr>

                <tr *ngFor="let p of this.objectsToShow">
                  <td colspan="4">
                    {{ p.farm_code }}
                  </td>

                  <td colspan="4">
                    {{ p.td_date | date : "dd/MM/yyyy" }}
                  </td>

                  <td colspan="4">
                    {{ p.td_Kamut_Mishkal }}
                  </td>

                  <td colspan="4">
                    {{ p.td_flock }}
                  </td>

                  <td colspan="4">
                    {{ p.pakach_name }}
                  </td>
                  <td colspan="4">
                    {{ p.td_yzrn }}
                  </td>
                </tr>
              </div>
            </ng-container>
          </tbody>
        </table>
      </td>
    </tr>
  </table>
</div>
